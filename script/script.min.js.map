{"version":3,"sources":["script.js"],"names":["window","unnuo","main","_n","_min","_max","this","n","min","max","result","prototype","getRandomNumber","Math","random","checkNumber","num","i","length","getNNumber","push","Random","Mine","callback","number","isMine","row","col","htmlDOM","document","createElement","className","open","mineSweep","_times","times","container","getElementById","mineAmount","array","bombArray","createGameData","r","c","mine","sweep","appendChild","createMinePosition","round","calculateAround","temp","j","innerHTML","handle","console","log","start","save","Signed","localStorage","setItem","JSON","stringify"],"mappings":"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","file":"script.min.js","sourcesContent":["window.unnuo = window.unnuo || {};\r\n(function() {\r\n\r\n    // 传入一个参数n。生成n个1-31的随机数，且不重复\r\n    function main(_n,_min,_max) {\r\n        this.n = _n;\r\n        this.min = _min;\r\n        this.max = _max;\r\n        this.result = [];\r\n    }\r\n\r\n    main.prototype.getRandomNumber = function() {\r\n        return Math.random()*this.max;\r\n    }\r\n\r\n    /**\r\n     * check if this num is in this.result\r\n     * @param  {number} num number to check\r\n     * @return boolen       true for in ; false for not in\r\n     */\r\n    main.prototype.checkNumber = function(num) {\r\n        for (var i = 0; i < this.result.length; i++) {\r\n            if(this.result[i] == num){\r\n                return true;\r\n            }else{\r\n\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    main.prototype.getNNumber = function() {\r\n        while (this.result.length < this.n) {\r\n            let num = this.getRandomNumber();\r\n            if(\r\n                !this.checkNumber(num)&&\r\n                num>this.min&&\r\n                num<this.max\r\n            ){\r\n                this.result.push(num);\r\n            }else{\r\n\r\n            }\r\n        }\r\n\r\n        return this.result;\r\n    }\r\n\r\n    unnuo.Random = main;\r\n\r\n})()\r\n\nwindow.unnuo = window.unnuo || {};\r\n(function() {\r\n\r\n    function getMultiRandomNumber() {\r\n        if(arguments.length == 2){\r\n            \r\n        }\r\n    }\r\n\r\n})()\r\n\nwindow.unnuo = window.unnuo || {};\r\n(function() {\r\n\r\n    /**\r\n     * number {number} mines around\r\n     * isMine {boolean} is mine\r\n     */\r\n    function Mine(callback) {\r\n        this.number = 0;\r\n        this.isMine = false;\r\n        this.row = null;\r\n        this.col = null; // 创建的时候，给它记录位置\r\n        this.htmlDOM = document.createElement('div');\r\n        this.htmlDOM.className = 'mine';\r\n\r\n        // this.htmlDOM.addEventListener('click', function() {\r\n        //     if (this.isMine) {\r\n        //         // bomb\r\n        //         var data = {\r\n        //             type: -1,\r\n        //             row: this.row,\r\n        //             col: this.col,\r\n        //             number:this.number\r\n        //         }\r\n        //     } else if (!this.isMine && this.number == 0) {\r\n        //         // 如果不是雷，并且周围没有雷\r\n        //         var data = {\r\n        //             type: 0,\r\n        //             row: this.row,\r\n        //             col: this.col,\r\n        //             number:this.number\r\n        //         }\r\n        //     } else {\r\n        //         // 如果是雷，并且周围有雷\r\n        //         var data = {\r\n        //             type: 1,\r\n        //             row: this.row,\r\n        //             col: this.col,\r\n        //             number:this.number\r\n        //         }\r\n        //     }\r\n        //     callback(data)\r\n        //\r\n        // }.bind(this));\r\n\r\n        this.open = function() {\r\n\r\n        }\r\n    }\r\n\r\n    unnuo.Mine = Mine;\r\n\r\n})()\r\n\nwindow.unnuo = window.unnuo || {};\r\n(function() {\r\n\r\n    function mineSweep(_times) {\r\n        if (typeof _times === 'number' && _times > 0) {\r\n            this.times = _times;\r\n        } else {\r\n            this.times = 0;\r\n        }\r\n        this.container = document.getElementById('mineSweep');\r\n        this.col = 16;\r\n        this.row = 20 * this.times;\r\n        this.mineAmount = 150 * this.times;\r\n        this.array = [];\r\n        this.bombArray = [];\r\n\r\n        /**\r\n         * create mine Data Array\r\n         * 2017/3/30 下午2:50:27\r\n         */\r\n        this.createGameData = function() {\r\n            var r = 0,\r\n                c = 0;\r\n            while (r < this.row) {\r\n                this.array[r] = [];\r\n                while (c < this.col) {\r\n                    let mine = new unnuo.Mine(this.sweep);\r\n                    this.array[r][c] = mine;\r\n                    mine.row = r;\r\n                    mine.col = c;\r\n                    this.container.appendChild(mine.htmlDOM);\r\n                    c++;\r\n                }\r\n                c = 0;\r\n                r++;\r\n\r\n            }\r\n            r = 0;\r\n            c = 0;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * create mine position\r\n         * 2017/3/31 下午1:37:38\r\n         */\r\n        this.createMinePosition = function() {\r\n            let times = 0;\r\n            while (times < this.mineAmount) {\r\n                let col = Math.round(Math.random() * (this.col - 1));\r\n                let row = Math.round(Math.random() * (this.row - 1));\r\n                let mine = this.array[row][col];\r\n                if (!mine.isMine) {\r\n                    mine.isMine = true;\r\n                    mine.htmlDOM.className += ' mine-bomb'; // delete\r\n                    this.bombArray.push({\r\n                        row: row,\r\n                        col: col\r\n                    })\r\n                    times++;\r\n                }\r\n            }\r\n            // this.array[this.bombArray[1].row][this.bombArray[1].col].htmlDOM.style.backgroundColor = '#f00';\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * calculate mine amout around this position\r\n         * 2017/3/31 下午1:39:01\r\n         */\r\n        this.calculateAround = function() {\r\n            for (var row = 0; row < this.array.length; row++) {\r\n                for (var col = 0; col < this.array[row].length; col++) {\r\n                    // 遍历中心点\r\n                    let temp = 0;\r\n                    if (this.array[row][col] && !this.array[row][col].isMine) {\r\n                        // 如果中心点存在，并且不是雷，则计算周边的雷数量，并设置中心的的innerHTML\r\n                        for (var i = -1; i < 2; i++) {\r\n                            if (this.array[row + i]) {\r\n                                for (var j = -1; j < 2; j++) {\r\n                                    // 遍历周围检测点\r\n                                    if (this.array[row + i][col + j] && this.array[row + i][col + j].isMine) {\r\n                                        // 如果检测点存在，并且为雷，并且检测点不是中心点\r\n                                        temp++;\r\n                                    }\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                        this.array[row][col].number = temp;\r\n                        this.array[row][col].htmlDOM.innerHTML = temp;\r\n                        this.array[row][col].htmlDOM.className += ' has' + temp;\r\n                    }\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n\r\n        this.handle = function() {\r\n            // 给各个点绑定上事件处理器\r\n            console.log('handle');\r\n        }\r\n\r\n        this.createGameData().createMinePosition().calculateAround().handle(); //\r\n\r\n    }\r\n\r\n    mineSweep.prototype.start = function() {\r\n        // 开始方法\r\n    }\r\n\r\n    mineSweep.prototype.save = function() {\r\n        // 保存游戏状态\r\n        if (Signed) {\r\n            // 如果已经登录的，保存到服务器\r\n        } else {\r\n            localStorage.setItem('unnnuoMineSweepHistory', JSON.stringify(this.array))\r\n        }\r\n    }\r\n\r\n    unnuo.mineSweep = mineSweep;\r\n})()\r\n\r\n// new unnuo.mineSweep(1);\r\n"]}